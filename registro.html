<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <title>Game on Formulario de Registro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body id="fondo">
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html"> 
        <strong>Game On</strong>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="index.html">Inicio</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Categorías
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="accion.html">Acción</a></li>
              <li><a class="dropdown-item" href="familiar.html">Familiar</a></li>
              <li><a class="dropdown-item" href="deportes.html">Deportes</a></li>
              <li><a class="dropdown-item" href="horror.html">Horror</a></li>
              <li><a class="dropdown-item" href="rpg1.html">RPG</a></li>
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="mailto:contacto@gmail.com">Contacto</a>
          </li>
        </ul>
        <form class="d-flex" role="search">
          <input class="form-control me-2" type="search" placeholder="Busca tu juego" aria-label="Search">
          <button class="btn btn-outline-success" type="submit">Buscar</button>
        </form>
      </div>
    </div>
  </nav>
  <br>
  <div style="text-align:center">
    <img id="banner" src="img/banner.png">
  </div>
  <br>
  <br>
  <div class="formulario">
    <h1><center>Formulario de Registro</center></h1>
  </div> 
  <!--AUTENTICACION DE USUARIO-->
  <div class="login-container text-center"> <!-- Añadido class "text-center" para centrar el contenido -->
    <form role="search" id="formulario-login"> <!-- Formulario para iniciar sesión -->  
        <div class="mb-3">        
            <input class="form-control" type="text" placeholder="Nombre de usuario o e-mail" aria-label="Username">
        </div>  
        <div class="mb-3">        
            <input class="form-control" type="password" placeholder="Contraseña" aria-label="Password">
        </div>  
        <div class="d-grid"> <!-- Se añade un contenedor con d-grid para facilitar el centrado -->
            <button class="btn btn-outline-primary" type="submit">Iniciar Sesión</button>
        </div>
    </form>  
    <a href="recuperar_contrasena.html" class="btn btn-link" target="_blank">Recuperación de Contraseña</a> 
  </div>  
  
  <!--FORMULARIO DE REGISTRO-->  
  <div class="container">    
    <div class="row justify-content-center">
      <div class="col-6">
        <div class="card">
          <div class="card-body">            
            <form id="formulario-registro" action="">
              <!--ETIQUETAS DE ENTRADA DE FORMULARIO-->
              <div class="mb-3">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" name="nombre" id="nombre">
                <small class="text-danger" id="nombre-error"></small>
              </div>
              <div class="mb-3">
                <label for="appaterno" class="form-label">Apellido Paterno</label>
                <input type="text" class="form-control" name="appaterno" id="appaterno">
                <small class="text-danger" id="appaterno-error"></small>
              </div>
              <div class="mb-3">
                <label for="apmaterno" class="form-label">Apellido Materno</label>
                <input type="text" class="form-control" name="apmaterno" id="apmaterno">
                <small class="text-danger" id="apmaterno-error"></small>
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input type="email" class="form-control" name="email" id="email">
                <small class="text-danger" id="email-error"></small>
              </div> 
              <div class="mb-3">
                <label for="nomusuario" class="form-label">Nombre de Usuario</label>
                <input type="text" class="form-control" name="nomusuario" id="nomusuario">
                <small class="text-danger" id="nomusuario-error"></small>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" class="form-control" name="password" id="password">
                <small class="text-danger" id="password-error"></small>
              </div>
              <div class="mb-3">
                <label for="password2" class="form-label">Repetir Contraseña</label>
                <input type="password" class="form-control" name="password2" id="password2">
                <small class="text-danger" id="password2-error"></small>
              </div>
              <div class="mb-3">
                <label for="fecha" class="form-label">Fecha de nacimiento</label>
                <input type="date" class="form-control" name="fecha" id="fecha">
                <small class="text-danger" id="fecha-error"></small>
              </div>
              <div class="mb-3">
                <label for="direccion" class="form-label">Dirección</label>
                <input type="text" class="form-control" name="direccion" id="direccion">                               
              </div>
              <!-- Botón para guardar -->
              <div class="d-grid">
                <button type="submit" class="btn btn-primary">Guardar</button>
                <br>
                <button type="button" class="btn btn-secondary" onclick="limpiarCampos()">Limpiar</button>
              </div> 
            </form>
          </div>
        </div>
      </div>
    </div>       

   
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>

  <script>
      $(document).ready(function(){
          $('#formulario-registro').submit(function(event) {
              event.preventDefault();
              // Limpiar mensajes de error
              $('#nombre-error').text('');
              $('#appaterno-error').text('');
              $('#apmaterno-error').text('');
              $('#email-error').text('');
              $('#nomusuario-error').text('');                 
              $('#password-error').text('');
              $('#password2-error').text('');
              $('#fecha-error').text('');  

              // Validación del nombre, apellidos y nombre de usuario
              if($('#nombre').val() === '') {
                  $('#nombre-error').text('El campo nombre no puede quedar vacío');
                  return;
              }
              if($('#appaterno').val() === '') {
                  $('#appaterno-error').text('El campo apellido paterno no puede quedar vacío');
                  return;
              }
              if($('#apmaterno').val() === '') {
                  $('#apmaterno-error').text('El campo apellido materno no puede quedar vacío');
                  return;
              }

              //Validación del e-mail
              const emailValue = $('#email').val();
              const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (emailValue === '') {
                  $('#email-error').text('El campo correo electrónico no puede quedar vacío');
                  return;
              } else if (!emailPattern.test(emailValue)) {
                  $('#email-error').text('Debe ingresar un e-mail válido');
                  return; 
              }

              //validación de nombre de usuario    
              if($('#nomusuario').val() === '') {
                  $('#nomusuario-error').text('El nombre de usuario no puede quedar vacío');
                  return;
              }
              
              // Validación de contraseña
              const passwordValue = $('#password').val();
              const password2Value = $('#password2').val();
              const passwordPattern = /^(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{6,18}$/;
              if (passwordValue !== password2Value) {
                  $('#password-error').text('Las contraseñas no coinciden');
                  return;
              }
              if (!passwordPattern.test(passwordValue)) {
                  $('#password-error').text('Contraseña debe tener 6 a 18 dígitos, un númeo y una letra mayúscula');
                  return;
              }              
              // Validación de edad
              const fechaValue = $('#fecha').val();
              if (fechaValue === '') {
                  $('#fecha-error').text('Debe ingresar una fecha válida');
                  return;
              }
              const fecha = new Date(fechaValue);
              const hoy = new Date();
              const edad = hoy.getFullYear() - fecha.getFullYear();
              const mes = hoy.getMonth() - fecha.getMonth();
              if (mes < 0 || (mes === 0 && hoy.getDate() < fecha.getDate())) {
                  edad--;
              }
              if (edad < 13) {
                  $('#fecha-error').text('Solo pueden registrarse mayores de 13 años');
                  return;
              }
              // Envío de formulario            
              this.submit();
          });
      });

      function limpiarCampos() {
          // Restablecer el formulario a su estado original
          $('#formulario-registro')[0].reset();

          // Limpiar los mensajes de error
          $('#nombre-error').text('');
          $('#appaterno-error').text('');
          $('#apmaterno-error').text('');
          $('#nomusuario-error').text('');
          $('#email-error').text('');
          $('#fecha-error').text('');
          $('#password-error').text('');
          $('#password2-error').text('');
      }
  </script>  
</body>
</html>
